<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DUHS Application</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <link rel="stylesheet" href="https://getbootstrap.com/docs/4.0/examples/dashboard/dashboard.css" />
  </head>
  <body>

    <%- include('header.ejs'); %>

    <br>
    
    <div class="container-fluid">
      <div class="row">

        <%- include('sidebar.ejs'); %>

        <main class="col-sm-9 ml-sm-auto col-md-10 pt-3" role="main">
          <h3>Fee Records</h3>
          <a class="btn btn-primary" href="/main">Goto Back</a>
         
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>S#</th>
                  <th>Month of</th>
                  <th>Pay Date</th>
                  <th>Amount</th>
                  <th>Status</th>
                  <th>Edit</th>
                </tr>
              </thead>
              <tbody>
                <%= mydata[0].studentname  %>

                <%
                
      const bands = [ 
        { genre: 'Rap', band: 'Migos', albums: 2},
        { genre: 'Pop', band: 'Coldplay', albums: 4},
        { genre: 'Rock', band: 'Breaking Benjamins', albums: 1}
      ];

      var feeData = mydata[0].fees;

      function compare(a, b) {
        // Use toUpperCase() to ignore character casing
        const genreA = a.status;
        const genreB = b.status;
      
        let comparison = 0;
        if (genreA > genreB) {
          comparison = -1;
        } else if (genreA < genreB) {
          comparison = 1;
        }
        return comparison;
      }
      
      var finalFee = feeData.sort(compare);
      console.log('FEE DATA ', finalFee);
      

                
                %>




                <% for(var i = 0; i < mydata[0].fees.length; i++){ %>                            
                <tr>
                  <td><%= i+1 %></td>
                  <td><%= mydata[0].fees[i].monthof %></td>
                  <td><%= mydata[0].fees[i].paydate %></td>
                  <td><%= mydata[0].fees[i].amount %></td>

                  <% if(mydata[0].fees[i].status == 'Unpaid'){ %>
                    <td class="text-danger"><%= mydata[0].fees[i].status %></td>

                  <% } else { %>

                    <td><%= mydata[0].fees[i].status %></td>
                  <% } %>

                  
                  <td><a class="btn btn-primary" href="/editfees/<%= mydata[0]._id %>/<%= mydata[0].fees[i]._id %>">Edit</a></td>
                  
                </tr>

                <% } %>               

              </tbody>
            </table>            
          </div>       
          
        </main>

      </div>
    </div>
    
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

  </body>
</html>
            